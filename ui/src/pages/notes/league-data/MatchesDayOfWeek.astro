---
import Chart from 'src/components/Chart.astro';
import { Figure } from 'src/components/Figure';
import * as Plot from '@observablehq/plot';
import type { Match } from './_types';
import { getMatches } from './_util';

let matches: Array<Match> = getMatches();
---

<Figure caption="Figure 3. Day of week distribution of all games">
	<Chart
		options={{
			x: { grid: true, label: 'matches â†’' },
			y: { tickFormat: Plot.formatWeekday('en-US', 'short') },
			marks: [Plot.barX(matches, Plot.groupY({ x: 'count' }, { y: (d) => d.startDate.getDay() }))],
		}}
	/>
</Figure>
